<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Views vs Stored Procedures - Real World Examples</title>
</head>
<body>

    <h1>üè¶ Banking System Examples</h1>

    <h2>‚úî 1. Views in Banking</h2>
    <p>Banks use views to show limited customer information for security and easy reporting.</p>

    <h3>View Example: Customer Account Summary</h3>
    <pre>
CREATE VIEW customer_account_summary AS
SELECT c.customer_id, c.name, a.account_number, a.balance
FROM customers c
JOIN accounts a ON c.customer_id = a.customer_id;
    </pre>

    <p><strong>Why used?</strong></p>
    <ul>
        <li>Show limited data to staff</li>
        <li>Hide private information (Aadhaar, PAN)</li>
        <li>Simplifies complex joins</li>
    </ul>

    <hr>

    <h2>‚úî 2. Stored Procedure in Banking</h2>
    <p>Stored procedures help perform safe, complex operations like money transfers.</p>

    <h3>Procedure Example: Money Transfer</h3>
    <pre>
DELIMITER //
CREATE PROCEDURE transfer_money(
    IN sender INT,
    IN receiver INT,
    IN amount DECIMAL(10,2)
)
BEGIN
    IF (SELECT balance FROM accounts WHERE account_number = sender) < amount THEN
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Insufficient Balance';
    END IF;

    UPDATE accounts SET balance = balance - amount
    WHERE account_number = sender;

    UPDATE accounts SET balance = balance + amount
    WHERE account_number = receiver;

    INSERT INTO transactions(sender, receiver, amount, created_at)
    VALUES (sender, receiver, amount, NOW());
END //
DELIMITER ;
    </pre>

    <p><strong>Why used?</strong></p>
    <ul>
        <li>Safe ACID transactions</li>
        <li>Runs faster (precompiled)</li>
        <li>Centralized business logic</li>
    </ul>

    <hr><br>

    <h1>üõí E-commerce System Examples</h1>

    <h2>‚úî 1. Views in E-commerce</h2>
    <p>Views help show product lists easily without repeating joins.</p>

    <h3>View Example: Product Catalog</h3>
    <pre>
CREATE VIEW product_catalog AS
SELECT p.product_id, p.name, p.price, c.category_name
FROM products p
JOIN categories c ON p.category_id = c.category_id;
    </pre>

    <p><strong>Why used?</strong></p>
    <ul>
        <li>Used for homepage, search, and seller panel</li>
        <li>Simplifies code</li>
        <li>Hides sensitive columns (supplier price)</li>
    </ul>

    <hr>

    <h2>‚úî 2. Stored Procedure in E-commerce</h2>
    <p>Stored procedures ensure correct order creation and stock handling.</p>

    <h3>Procedure Example: Place Order</h3>
    <pre>
DELIMITER //
CREATE PROCEDURE place_order(
    IN userId INT,
    IN productId INT,
    IN qty INT
)
BEGIN
    IF (SELECT stock FROM products WHERE product_id = productId) < qty THEN
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Out of Stock';
    END IF;

    INSERT INTO orders(user_id, order_date)
    VALUES (userId, NOW());

    SET @orderId = LAST_INSERT_ID();

    INSERT INTO order_items(order_id, product_id, quantity)
    VALUES (@orderId, productId, qty);

    UPDATE products
    SET stock = stock - qty
    WHERE product_id = productId;
END //
DELIMITER ;
    </pre>

    <p><strong>Why used?</strong></p>
    <ul>
        <li>Prevents overselling stock</li>
        <li>Ensures order + order_items consistency</li>
        <li>Faster execution</li>
    </ul>

    <hr>

    <h1>üìå Final Summary</h1>
    <table border="1" cellpadding="10">
        <tr>
            <th>Feature</th>
            <th>Banking Example</th>
            <th>E-commerce Example</th>
        </tr>
        <tr>
            <td>View</td>
            <td>Customer Account Summary</td>
            <td>Product Catalog View</td>
        </tr>
        <tr>
            <td>Stored Procedure</td>
            <td>Money Transfer Procedure</td>
            <td>Place Order Procedure</td>
        </tr>
    </table>

</body>
</html>
